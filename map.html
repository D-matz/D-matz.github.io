<!DOCTYPE html> 
<html lang="en"> 
<head> 
	<title>Eat More Food</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Eat More Food | Recipe blogs from around the globe">
	<meta property="og:title" content="Eat More Food">
    <meta property="og:description" content="Recipe blogs from around the globe">
    <meta property="og:image" content="preview.png">
    <meta property="og:url" content="https://eatmore.food/">
    <meta property="og:type" content="website">
  <link rel="icon" href="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%3e%3cdefs%3e%3clinearGradient%20id='blue-gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23A6D7F0'/%3e%3cstop%20offset='100%25'%20stop-color='%23023E58'/%3e%3c/linearGradient%3e%3c/defs%3e%3ccircle%20cx='50'%20cy='50'%20r='50'%20fill='url(%23blue-gradient)'/%3e%3c/svg%3e" type="image/svg+xml" />
    <script src="d3.v4.min.js"></script> 
    <script src="d3-geo-projection.v2.min.js"></script>
	<link rel="stylesheet" href="style.css">
	<script src="common_loadtheme.js"></script>
</head>
<body>
  <div id="nav" style="display: flex; flex-wrap: wrap; justify-content: center; align-items: center; height: 10vh;">
    <a title="globe (3D)" href="/globe.html">üåé</a>
    <a title="map (2D)" href="/map.html">üó∫Ô∏è</a>
    <a title="list (uh...it's a list)" href="/list.html">üìÑ</a>
	
	<input list="countries" type="text" id="searchCountry" placeholder="üîç">
	<datalist id="countries">
<option value="Afghanistan">
<option value="Albania">
<option value="Algeria">
<option value="Angola">
<option value="Antarctica">
<option value="Argentina">
<option value="Armenia">
<option value="Australia">
<option value="Austria">
<option value="Azerbaijan">
<option value="Bangladesh">
<option value="Belarus">
<option value="Belgium">
<option value="Belize">
<option value="Benin">
<option value="Bhutan">
<option value="Bolivia">
<option value="Bosnia and Herzegovina">
<option value="Botswana">
<option value="Brazil">
<option value="Brunei">
<option value="Bulgaria">
<option value="Burkina Faso">
<option value="Burundi">
<option value="Cambodia">
<option value="Cameroon">
<option value="Canada">
<option value="Central African Republic">
<option value="Chad">
<option value="Chile">
<option value="China">
<option value="Colombia">
<option value="Costa Rica">
<option value="Croatia">
<option value="Cuba">
<option value="Cyprus">
<option value="Czech Republic">
<option value="Democratic Republic of the Congo">
<option value="Denmark">
<option value="Djibouti">
<option value="Dominican Republic">
<option value="East Timor">
<option value="Ecuador">
<option value="Egypt">
<option value="El Salvador">
<option value="England">
<option value="Equatorial Guinea">
<option value="Eritrea">
<option value="Estonia">
<option value="Ethiopia">
<option value="Falkland Islands">
<option value="Fiji">
<option value="Finland">
<option value="France">
<option value="French Southern and Antarctic Lands">
<option value="Gabon">
<option value="Gambia">
<option value="Georgia">
<option value="Germany">
<option value="Ghana">
<option value="Greece">
<option value="Greenland">
<option value="Guatemala">
<option value="Guinea">
<option value="Guinea Bissau">
<option value="Guyana">
<option value="Haiti">
<option value="Honduras">
<option value="Hungary">
<option value="Iceland">
<option value="India">
<option value="Indonesia">
<option value="Iran">
<option value="Iraq">
<option value="Ireland">
<option value="Israel">
<option value="Italy">
<option value="Ivory Coast">
<option value="Jamaica">
<option value="Japan">
<option value="Jordan">
<option value="Kazakhstan">
<option value="Kenya">
<option value="Kosovo">
<option value="Kuwait">
<option value="Kyrgyzstan">
<option value="Laos">
<option value="Latvia">
<option value="Lebanon">
<option value="Lesotho">
<option value="Liberia">
<option value="Libya">
<option value="Lithuania">
<option value="Luxembourg">
<option value="Macedonia">
<option value="Madagascar">
<option value="Malawi">
<option value="Malaysia">
<option value="Mali">
<option value="Mauritania">
<option value="Mexico">
<option value="Moldova">
<option value="Mongolia">
<option value="Montenegro">
<option value="Morocco">
<option value="Mozambique">
<option value="Myanmar">
<option value="Namibia">
<option value="Nepal">
<option value="Netherlands">
<option value="New Caledonia">
<option value="New Zealand">
<option value="Nicaragua">
<option value="Niger">
<option value="Nigeria">
<option value="North Korea">
<option value="Northern Cyprus">
<option value="Norway">
<option value="Oman">
<option value="Pakistan">
<option value="Panama">
<option value="Papua New Guinea">
<option value="Paraguay">
<option value="Peru">
<option value="Philippines">
<option value="Poland">
<option value="Portugal">
<option value="Puerto Rico">
<option value="Qatar">
<option value="Republic of Serbia">
<option value="Republic of the Congo">
<option value="Romania">
<option value="Russia">
<option value="Rwanda">
<option value="Saudi Arabia">
<option value="Senegal">
<option value="Sierra Leone">
<option value="Slovakia">
<option value="Slovenia">
<option value="Solomon Islands">
<option value="Somalia">
<option value="Somaliland">
<option value="South Africa">
<option value="South Korea">
<option value="South Sudan">
<option value="Spain">
<option value="Sri Lanka">
<option value="Sudan">
<option value="Suriname">
<option value="Swaziland">
<option value="Sweden">
<option value="Switzerland">
<option value="Syria">
<option value="Taiwan">
<option value="Tajikistan">
<option value="Thailand">
<option value="The Bahamas">
<option value="Togo">
<option value="Trinidad and Tobago">
<option value="Tunisia">
<option value="Turkey">
<option value="Turkmenistan">
<option value="Uganda">
<option value="Ukraine">
<option value="United Arab Emirates">
<option value="United Republic of Tanzania">
<option value="Uruguay">
<option value="USA">
<option value="Uzbekistan">
<option value="Vanuatu">
<option value="Venezuela">
<option value="Vietnam">
<option value="West Bank">
<option value="Western Sahara">
<option value="Yemen">
<option value="Zambia">
<option value="Zimbabwe">
	</datalist>
    
	<button onclick="toggleTheme()"
      style="margin-left: 10px; height: 25px;"
      class="theme-switcher-grid"
      id="theme-switcher-grid"
      aria-label="Switch theme"
    >
      <div class="sun" id="sun" aria-hidden="true"></div>
      <div class="moon-overlay" id="moon-overlay" aria-hidden="true"></div>
      <div class="cloud-ball cloud-ball-left" id="ball1" aria-hidden="true"></div>
      <div class="cloud-ball cloud-ball-middle" id="ball2" aria-hidden="true"></div>
      <div class="cloud-ball cloud-ball-right" id="ball3" aria-hidden="true"></div>
      <div class="cloud-ball cloud-ball-top" id="ball4" aria-hidden="true"></div>
      <div class="star" id="star1" aria-hidden="true"></div>
      <div class="star" id="star2" aria-hidden="true"></div>
      <div class="star" id="star3" aria-hidden="true"></div>
      <div class="star" id="star4" aria-hidden="true"></div>
    </button>
  </div>

  <div style="flex-grow: 1; display: flex; justify-content: center; align-items: center;">
	<svg style="width: min(90vh * 1.68766789, 90vw); height: min(90vh, 90vw / 1.68766789);"></svg>
  </div>

	<script src="common_tooltip.js"></script>
    <script> 
const aspectRatio = 1.68766789;
let svg = d3.select("svg");
let projection = d3.geoWinkel3();
let path = d3.geoPath().projection(projection);
let countriesGroup, ocean;

// Create a sphere feature for the ocean background
const sphere = {type: "Sphere"};

const zoom = d3.zoom()
  .scaleExtent([0.5, 8])
  .filter(function() {
    if (d3.event.type === "wheel") return true;
    if (d3.event.type === "mousedown") return d3.event.target.tagName === "path" && d3.event.target.classList.contains("ocean");
    return true;
  })
.on("start", function() {
  svg.selectAll("path:not(.ocean)").style("pointer-events", "none");
  ocean.style("cursor", "grabbing");
  hideTooltip();
})
.on("end", function() {
  svg.selectAll("path:not(.ocean)").style("pointer-events", "auto");
  ocean.style("cursor", "grab");
})
  .on("zoom", function() {
    countriesGroup.attr("transform", d3.event.transform);
    ocean.attr("transform", d3.event.transform);
  });

d3.json("/colored_world.json", function(data) {
  ocean = svg.insert("path", ":first-child")
    .datum(sphere)
    .attr("class", "ocean")
    .attr("d", path)
    .attr("fill", "var(--ocean-color)")
    .attr("style", "transition: fill 0.8s ease; cursor: grab;")
  
  // Create countries
  countriesGroup = svg.append("g");
  countriesGroup.selectAll("path")
    .data(data.features)
    .enter().append("path")
    .attr("d", path)
    .attr("fill", d => `var(--country-${['one','two','three','four'][d.properties.color - 1]})`)
    .style("cursor", "pointer")
    .on("click", function(d) {
      if (pinnedCountry === d) {
        // Clicking same country - unpin
        hideTooltip();
      } else {
        // Pin new country
        pinnedCountry = d;
        showTooltip(d, d3.event);
      }
    })
    .on("mouseover", d => { if (!pinnedCountry) showTooltip(d, d3.event); })
    .on("mouseout", () => { if (!pinnedCountry) hideTooltip(); })
    .on("mousemove", () => { if (!pinnedCountry) showTooltip(null, d3.event); }); 
    
  svg.call(zoom);
});

function updateScale() {
  const mapHeight = Math.min(window.innerHeight * 0.9, window.innerWidth * 0.9 / aspectRatio);
  const mapWidth = mapHeight * aspectRatio;
  
  svg.attr("width", mapWidth).attr("height", mapHeight);
  projection.scale(mapHeight * 0.3).translate([mapWidth / 2, mapHeight / 2]);
  path.projection(projection);
	ocean.attr("d", path);
	countriesGroup.selectAll("path").attr("d", path);
}

updateScale();
window.addEventListener("resize", updateScale);
    </script> 
		<script src="common_toggletheme.js"></script>

</body>
  
</html>